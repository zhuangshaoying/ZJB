@using ZJB.Api.Entity
@using ZJB.Api.Models
@model ZJB.Api.Models.PublicUserModel
@{
    Layout = null;
}

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>个人中心</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="keywords" content="">
    <meta name="description" content="">
	<link href="/css/esf/iconfont.css" rel="stylesheet">
    <link href="~/Css/Esf/style.css" rel="stylesheet" />
    @*<link href="~/Css/Esf/topBottom.css" rel="stylesheet" />*@
    <link href="~/Css/Esf/fangduod.css" rel="stylesheet" />
    <script src="~/Scripts/Esf/jquery-1.7.1.min.js"></script>
    <style>
        a:link, a:visited, a:active {
            text-decoration: none;
            color: #000;
            outline: none;
        }

        a, button, input {
            -webkit-tap-highlight-color: rgba(255,0,0,0);
        }

        a {
            text-decoration: none;
            color: #000;
            outline: none;
        }

        .header ul li:nth-child(3n+2) {
            width: 60%;
            font-size: 18px;
            position: relative;
        }

        .header ul li:nth-child(3n+3) {
            width: 20%;
            font-size: 14px;
        }

        .header {
            width: 100%;
            top: 0;
            position: fixed;
            z-index: 999;
            left: 0;
        }
        /*.h5-house-body {
            background-color: #f5f5f5;
            max-width: 40rem;
            margin: 0 auto;
        }

        body {
            font-family: Helvetica Neue,Helvetica,Arial,sans-serif;
            color: #333;
            line-height: 1;
        }*/

        body {
            margin: 0;
        }

        *, :after, :before {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            color: inherit;
        }

        input, textarea {
            -webkit-appearance: none;
            -moz-appearance: none;
            outline: none;
        }

        input {
            line-height: normal;
        }

        button, input, optgroup, select, textarea {
            color: inherit;
            font: inherit;
            margin: 0;
        }



        .mod-smallnote.scale .smallnote-text {
            opacity: 1;
            -webkit-transform: scale(1);
            transform: scale(1);
        }

        .mod-smallnote.smallnote-mobile .smallnote-text {
            padding: 0 20px;
            font-size: 14px;
            line-height: 35px;
            border-radius: .3rem;
        }

        .mod-smallnote .smallnote-text {
            color: #fff;
            background: #3f454e;
            display: inline-block;
            opacity: 0;
            padding: 5px 14px 4px;
            border-radius: 3px;
            -webkit-transform: scale(1.2);
            -webkit-transition: -webkit-transform .4s ease, opacity .4s ease;
            transform: scale(1.2);
            transition: transform .4s ease, opacity .4s ease;
        }


        .mod-smallnote.smallnote-mobile {
            margin: auto;
            top: 0;
            padding: 0 20px;
            height: .36rem;
        }

        .mod-smallnote {
            position: fixed;
            left: 0;
            top: 50px;
            bottom: 0;
            right: 0;
            text-align: center;
            height: 18px;
            padding: 5px 14px 4px;
            margin: 0 auto;
            z-index: 100000;
        }

        .menu ul li:hover, .menu ul li:active {
            background: #F5F5F5;
        }

        .dtll-close {
            position: absolute;
            z-index: 1;
            top: .625rem;
            right: .625rem;
            width: .9375rem;
            height: .9375rem;
            cursor: pointer;
        }

            .dtll-close:after, .dtll-close:before {
                content: ' ';
                position: absolute;
                top: .4375rem;
                left: -.1875rem;
                width: 1.3125rem;
                height: .0625rem;
                background-color: #bcbcbc;
            }

            .dtll-close:after, .dtll-close:before {
                content: ' ';
                position: absolute;
                top: .4375rem;
                left: -.1875rem;
                width: 1.3125rem;
                height: .0625rem;
                background-color: #bcbcbc;
            }

            .dtll-close:before {
                -webkit-transform: rotate(-45deg);
                -moz-transform: rotate(-45deg);
                -ms-transform: rotate(-45deg);
                -o-transform: rotate(-45deg);
                transform: rotate(-45deg);
            }

        *, :after, :before {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            color: inherit;
        }

        .dtll-close:after {
            -webkit-transform: rotate(45deg);
            -moz-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            -o-transform: rotate(45deg);
            transform: rotate(45deg);
        }
		.user_comp {
			height: 201px;
			background-image: url("/images/esf/mine_head_bg_new.png");
			background-size: cover;
			background-repeat: no-repeat;
			text-align: center;
		}
		.w-defaulthead {
			width: 100%;
			margin: 0 auto;
			height: 48px;
			line-height: 48px;
			text-align: center;
			position: relative;
			display: -webkit-box;
			display: -webkit-flex;
			display: flex;
			display: box;
		}
		.w-defaulthead .back, .w-defaulthead .menu {
			display: block;
			width: 48px;
			height: 48px;
			text-align: center;
			color: #fff;
			font-size: 12px;
		}
		.wk_iconfont {
			font-family: "wk_iconfont" !important;
			font-size: 16px;
			font-style: normal;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
		}
		.box {
			display: -moz-box;
			display: -webkit-box;
			display: box;
		}
		.flexBox li {
			-moz-box-flex: 1;
			-webkit-box-flex: 1;
			box-flex: 1;
		}
		nav ul li {
			width: 33.33%;
		}
		nav ul li:not(:last-child) {
			border-right: 1px solid #09b976;
		}
		nav ul li a:active, nav ul li a:link, nav ul li a:visited {
			color: #ffffff;
		}
		.lh24 {
			line-height: 24px;
		}
		.fc-fff {
			color: #ffffff;
		}
		.f18 {
			font-size: 18px;
		}
		nav ul li a p {
			line-height: 1em;
			font-size:11px
		}
		.wrap {
			padding:0px 0px 50px
		}
		.my .menu ul {
			margin-top: 0px; 
		}
    </style>
    <script type="text/javascript">
        var goback = function () {
            history.length >= 2 ? history.go(-1) : window.location = 'http://www.zhujia001.com/';
        }
        function telshow() {
            $("#loginModal").show();
        }

        function divclose() {
            $("#loginModal").hide();
        }
        var countdown = 60;
        function settime(val) {
            if ($("#tel").val() != "") {
                if (countdown == 60) {
                    code();
                }
                if (countdown == 0) {
                    //val.removeAttribute("disabled");
                    $("#" + val.id).html("免费获取验证码");
                    val.setAttribute("class", "smscodeBtn");
                    val.setAttribute("onclick", "settime(this)");
                    clearTimeout(time);
                    countdown = 60;
                    return;
                } else {
                    //val.setAttribute("disabled", true);
                    $("#" + val.id).html("重新发送(" + countdown + ")");
                    val.setAttribute("class", "smscodeBtn cr9b bdcr9b");
                    val.removeAttribute("onclick");
                    countdown--;
                }
                var time = setTimeout(function () {
                    settime(val);
                }, 1000);
            } else {
                alert("手机号码不能为空！");
            }
        }
        function createDiv(txt) {
            var html = "";
            html += "<div class=\"mod-smallnote smallnote-mobile scale\"><div class=\"smallnote-text\">" + txt + "</div></div>";
            return html;
        }
        function code() {
            $.ajax({
                type: "post",
                url: "/Esf/IdentifyingCode",
                data: "tel=" + $("#tel").val(),
                dataType: "json",
                success: function (data) {

                }
            });
        }
        function addtel() {
            $.ajax({
                type: "post",
                url: "/Esf/AddTel",
                data: "tel=" + $("#tel").val() + "&code=" + $("#phoneVerify").val(),
                dataType: "json",
                success: function (data) {
                    $("body").prepend(createDiv(data.Message));
                    if (data.Success == 1) {
                        window.location = "/Esf/me";
                    }

                    var k = setInterval(function () {
                        $(".mod-smallnote").remove();
                        clearInterval(k);
                    }, 1000);
                }
            });
        }

        $(function () {
            $("#phoneVerify").keyup(function () {
                if ($("#phoneVerify").val().length == 4 && $("#tel").val().length == 11) {
                    $("#submitBtn").attr("class", "btnLong btnRed");
                    $("#submitBtn").attr("onclick", "addtel(this)");
                    $("#submitBtn").removeAttr("disabled");

                } else {
                    $("#submitBtn").attr("class", "btnLong btnDisabled");
                    $("#submitBtn").removeAttr("onclick");
                    $("#submitBtn").attr("disabled", "disabled");
                }
                //code
            });
            $("#tel").keyup(function () {
                if ($("#phoneVerify").val().length == 4 && $("#tel").val().length == 11) {
                    $("#submitBtn").attr("class", "btnLong btnRed");
                    $("#submitBtn").attr("onclick", "addtel(this)");
                    $("#submitBtn").removeAttr("disabled");

                } else {
                    $("#submitBtn").attr("class", "btnLong btnDisabled");
                    $("#submitBtn").removeAttr("onclick");
                    $("#submitBtn").attr("disabled", "disabled");
                }
                //code
            });

        });
        function createDiv(txt) {
            var html = "";
            html += "<div class=\"mod-smallnote smallnote-mobile scale\"><div class=\"smallnote-text\">" + txt + "</div></div>";
            return html;
        }
    </script>
</head>

<body>

<div class="user_comp">
	<div class="w-defaulthead"> <a class="back wk_iconfont" href="javascript:void(0);" onclick="goback()"></a></div>
	<div class="head" style="line-height: 30px;">
		<div style="padding-bottom: 15px;">
			<a href="javascript:void(0);" style="display: block; text-align: center;">
				<div>
					<img src="@Model.Portrait" style="height: 54px; width: 54px;vertical-align: middle; -webkit-box-shadow: 2px 1px 2px rgba(0, 0, 0, .15); box-shadow: 2px 1px 2px rgba(0, 0, 0, .15); border-radius: 30px; -webkit-border-radius: 30px; -moz-border-radius: 30px;">
				</div>
				<div style="font-size:16px;color:#fff;line-height:22px;margin-top:8px">
					<!--<span>@Model.NickName</span><br />-->
					<span onclick="telshow();">@(Model.Tel == "" ? "绑定手机号" : Model.Tel)</span>
				</div>
			</a>
			<div style="text-align: center;font-size:14px;color:#fff">
				@*<a href="/house/useredit.aspx">点击修改头像和昵称</a>*@
			</div>
		</div>
		<nav><ul class="flexBox box"><li class="mymoney"><a href="javascript:;"><div class="f18 fc-fff lh24">0.00</div><p>我的钱</p></a></li><li class="redBag"><a href="javascript:;" class="colorW"><div class="f18 fc-fff lh24">0.00</div><p>红包</p></a></li><li class="coupons"><a href="javascript:;"><div class="f18 fc-fff lh24">0</div><p>优惠券</p></a></li><li class="integral"><a href=javascript:;"><div class="f18 fc-fff lh24">0</div><p>积分</p></a></li></ul></nav>
	</div>
</div>
    <form id="form1" runat="server">
        <div class="wrap my">
            <div class="menu">
                <ul>
@{
    if (Model.VipType == 99)
    {
        <li>
            <a href="@Url.Action("BaoBeiList","Esf")">
                <i></i>
                <img src="/Images/esf/ff2.png"/>客户管理
            </a>
        </li>
    }
}
    <li>
                        <a href="@Url.Action("DelegateMng")">
                            <i></i>
                            <img src="/Images/esf/ff2.png"/>我的发布管理
                        </a>
                    </li>
                    <li>
                        <a href="@Url.Action("Browse","Esf")">
                            <i></i>
                            <img src="/Images/esf/see196x196.png" />我的浏览
                        </a>
                    </li>
                    <li>
                        <a href="@Url.Action("Collect")">
                            <i></i>
                            <img src="/Images/Esf/myuser_001.png" />我的收藏
                        </a>
                    </li>
                    <li>
                        <a href="@Url.Action("MeMessage")">
                            <i></i>
                            <img src="/Images/Esf/myuser_22.png" />我的消息
                            @{
                                if (ViewBag.MessNum != null && @ViewBag.MessNum > 0)
                                {
                                    <span style="float: right; background: 0; color: #f00; font-size: 14px;">@ViewBag.MessNum</span>
                                }
                            }

                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="loginModal" style="display: none;position: fixed;top: 0;left: 0;right: 0;bottom: 0;z-index: 1000;width: 100%;background-color: rgba(0,0,0,.6);">
            <div class="loginModal" style="display: block; top: 32%; height: 218px;">
                <i onclick="divclose()" class="dtll-close js-action-dt-login-close"></i>
                <section class="loginForm" id="loginForm" style="padding-top: 35px">
                    <article class="loginInput">
                        <div class="inputLine bor-bottom">
                            <i class="icon-mobile"></i>
                            <input name="mobile" onkeyup="value = value.replace(/[^\d]/g, '')" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))" id="tel" type="tel" placeholder="请输入手机号" maxlength="11">
                            <a id="getSmsCode" onclick="settime(this)" class="smscodeBtn">获取验证码</a>
                            @*<a id="getSmsCode" class="smscodeBtn cr9b bdcr9b">48秒后再试</a>*@
                        </div>
                        <div class="inputLine">
                            <i class="icon-smscode"></i>
                            <input id="phoneVerify" name="smsCode" type="tel" placeholder="请输入验证码" maxlength="4">
                        </div>
                    </article>
                    <article class="loginSubmit">
                        <button id="submitBtn" disabled="disabled" class="btnLong btnDisabled">绑定手机</button>
                    </article>
                </section>
            </div>
        </div>
     
    </form>
</body>
</html>
